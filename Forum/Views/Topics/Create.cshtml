@model ViewModels.Topics.CreateTopicForm

<div id="board-selector" class="float-right content-box pad">
	<ul>
		@if (ViewData["Categories"] is List<ViewModels.Boards.IndexCategory>) {
			foreach (var category in ViewData["Categories"] as List<ViewModels.Boards.IndexCategory>) {
				<li class="gap-bottom">
					<span class="font-small subdued-text">@category.Name</span>
					<ul>
						@for (var i = 0; i < category.Boards.Count; i++) {
							var checkbox = Model.BoardId == category.Boards[i].Id ? "checked" : "unchecked";

							<li class="hover-highlight pointer" toggle-board board-id="@category.Boards[i].Id" title="@category.Boards[i].Description">
								<img src="~/images/checkbox_@(checkbox).png" board-flag="@category.Boards[i].Id" />
								@category.Boards[i].Name
							</li>
						}
					</ul>
				</li>
			}
		}
	</ul>
	<hr />
	<p class="font-small subdued-text">Select which boards your topic will appear in.</p>
</div>

<div class="form content-box pad">
	<div asp-validation-summary="All" class="error"></div>

	<form method="post"
		  asp-action="@nameof(Forum.Controllers.Topics.Create)"
		  asp-controller="@nameof(Forum.Controllers.Topics)"
		  asp-route-returnurl="@ViewData["Referrer"]">

		@if (ViewData["Categories"] is List<ViewModels.Boards.IndexCategory>)
		{
			@foreach (var category in ViewData["Categories"] as List<ViewModels.Boards.IndexCategory>)
			{
				@foreach (var board in category.Boards)
				{
					<input type="hidden" name="Selected_@board.Id" value="@(board.Id == Model.BoardId ? "True" : "False")" />
				}
			}
		}

		<div>
			<partial name="../Messages/_MessageFormButtons" />

			<p class="pad-top error" data-valmsg-for="@nameof(Model.Body)" />
			<p class="pad-top"><textarea asp-for="@Model.Body" name="body"></textarea></p>
		</div>

		<p>
			<button class="save-button" name="action" value="save">Save Message</button>
			<button class="save-button" name="action" value="add-event">Go to Event Details</button>
		</p>
	</form>
</div>

@{ViewData["Title"] = "Create a Topic";}
@section Header {@ViewData["Title"]}

@section scripts {
	<script>
		window.assignedBoards = ["@Model.BoardId"];
		window.pageActions = 'message-create';
	</script>
}

@section styles {
	<link rel="stylesheet" href="~/styles/message-create.css" asp-append-version="true" />
}